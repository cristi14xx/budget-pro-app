<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0a0a0f">
    <title>Budget Pro</title>
    <link rel="manifest" href="manifest.json">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- AUTH -->
    <div id="auth-screen" class="auth-screen">
        <div class="auth-box">
            <div class="auth-logo">ğŸ’°</div>
            <h1>Budget Pro</h1>
            <p>FinanÈ›ele tale, simplificate</p>
            
            <div class="auth-tabs">
                <button class="auth-tab active" data-tab="login">Conectare</button>
                <button class="auth-tab" data-tab="register">Ãnregistrare</button>
            </div>
            
            <form id="login-form">
                <input type="email" id="login-email" placeholder="Email" required>
                <input type="password" id="login-password" placeholder="ParolÄƒ" required>
                <button type="submit" class="btn-primary">ConecteazÄƒ-te</button>
            </form>
            
            <form id="register-form" class="hidden">
                <input type="text" id="register-name" placeholder="Nume complet" required>
                <input type="email" id="register-email" placeholder="Email" required>
                <input type="password" id="register-password" placeholder="ParolÄƒ (min 6 caractere)" required>
                <button type="submit" class="btn-primary">CreeazÄƒ cont</button>
            </form>
            
            <div class="divider"><span>sau</span></div>
            <button id="google-btn" class="btn-google">ğŸ”µ ContinuÄƒ cu Google</button>
        </div>
    </div>

    <!-- APP -->
    <div id="app" class="app hidden">
        <!-- HOME -->
        <div id="view-home" class="view active">
            <header class="header">
                <div>
                    <span class="greeting" id="greeting">BunÄƒ ziua</span>
                    <h1 id="user-name">Utilizator</h1>
                </div>
                <div class="header-btns">
                    <button id="notif-btn" class="h-btn">ğŸ””<span class="badge" id="notif-count">0</span></button>
                    <button id="ai-btn" class="h-btn">ğŸ¤–</button>
                </div>
            </header>

            <section class="balance-card">
                <div class="bal-top">
                    <span>BalanÈ›Äƒ totalÄƒ</span>
                    <button id="hide-bal">ğŸ‘ï¸</button>
                </div>
                <h2 id="total-balance">0 RON</h2>
                <div class="bal-change" id="bal-change">ğŸ“ˆ +0% faÈ›Äƒ de luna trecutÄƒ</div>
                <div class="bal-stats">
                    <div class="bal-stat income">
                        <span>â†“</span>
                        <div><small>Venituri</small><strong id="total-income">0 RON</strong></div>
                    </div>
                    <div class="bal-stat expense">
                        <span>â†‘</span>
                        <div><small>Cheltuieli</small><strong id="total-expense">0 RON</strong></div>
                    </div>
                </div>
            </section>

            <section class="quick-actions">
                <button class="q-btn" data-action="expense"><span class="q-icon exp">âˆ’</span>CheltuialÄƒ</button>
                <button class="q-btn" data-action="income"><span class="q-icon inc">+</span>Venit</button>
                <button class="q-btn" data-action="correction"><span class="q-icon cor">âš–ï¸</span>CorecÈ›ie</button>
                <button class="q-btn" data-action="debt"><span class="q-icon dbt">ğŸ¤</span>Datorii</button>
            </section>

            <section class="insights-box">
                <div class="sec-header"><h3>âœ¨ AI Insights</h3><button id="refresh-insights">â†»</button></div>
                <div id="insights-list" class="insights-list">
                    <div class="insight">ğŸ’¡ AdaugÄƒ tranzacÈ›ii pentru insights personalizate</div>
                </div>
            </section>

            <section class="chart-box">
                <div class="sec-header"><h3>ğŸ“Š Cheltuieli</h3></div>
                <div class="chart-wrap"><canvas id="main-chart"></canvas></div>
            </section>

            <section class="trends-box">
                <div class="sec-header"><h3>ğŸ“ˆ TendinÈ›e</h3><button class="see-all" data-view="trends">Vezi â†’</button></div>
                <div class="trends-grid">
                    <div class="trend-item"><span>ğŸ“…</span><strong id="daily-avg">0 RON</strong><small>Media/zi</small></div>
                    <div class="trend-item"><span>ğŸ¯</span><strong id="month-pred">0 RON</strong><small>PredicÈ›ie</small></div>
                    <div class="trend-item"><span>ğŸ’°</span><strong id="save-rate">0%</strong><small>Economii</small></div>
                    <div class="trend-item"><span>ğŸ“Š</span><strong id="days-left">0</strong><small>Zile rÄƒmase</small></div>
                </div>
            </section>

            <section class="trans-box">
                <div class="sec-header"><h3>ğŸ“ TranzacÈ›ii recente</h3><button class="see-all" data-view="transactions">Vezi â†’</button></div>
                <div id="recent-trans" class="trans-list"></div>
            </section>

            <section class="goals-box">
                <div class="sec-header"><h3>ğŸ¯ Obiective</h3><button class="see-all" data-view="goals">Vezi â†’</button></div>
                <div id="goals-preview" class="goals-list"></div>
            </section>

            <section class="remind-box">
                <div class="sec-header"><h3>â° Remindere</h3><button class="see-all" data-view="reminders">Vezi â†’</button></div>
                <div id="remind-preview" class="remind-list"></div>
            </section>
        </div>

        <!-- TRANSACTIONS VIEW -->
        <div id="view-transactions" class="view">
            <header class="v-header">
                <button class="back-btn" data-back="home">â†</button>
                <h2>TranzacÈ›ii</h2>
                <button id="trans-filter-btn">ğŸ”</button>
            </header>
            <div class="filters">
                <button class="chip active" data-f="all">Toate</button>
                <button class="chip" data-f="expense">Cheltuieli</button>
                <button class="chip" data-f="income">Venituri</button>
            </div>
            <div class="month-nav">
                <button id="prev-m">â€¹</button>
                <span id="cur-month">Decembrie 2025</span>
                <button id="next-m">â€º</button>
            </div>
            <div id="all-trans" class="trans-list"></div>
        </div>

        <!-- TRENDS VIEW -->
        <div id="view-trends" class="view">
            <header class="v-header">
                <button class="back-btn" data-back="home">â†</button>
                <h2>Analize</h2>
                <div></div>
            </header>
            <div class="period-btns">
                <button class="p-btn active" data-p="week">7 zile</button>
                <button class="p-btn" data-p="month">30 zile</button>
                <button class="p-btn" data-p="year">1 an</button>
            </div>
            <div class="sum-cards">
                <div class="sum-card inc"><small>Venituri</small><strong id="t-income">0</strong></div>
                <div class="sum-card exp"><small>Cheltuieli</small><strong id="t-expense">0</strong></div>
                <div class="sum-card sav"><small>Economii</small><strong id="t-savings">0</strong></div>
            </div>
            <div class="chart-wrap"><canvas id="trend-chart"></canvas></div>
            <h4>ğŸ” Pattern-uri detectate</h4>
            <div id="patterns" class="patterns-list"></div>
            <h4>âš ï¸ Abateri de la normal</h4>
            <div id="anomalies" class="anomalies-list"></div>
            <h4>ğŸ“Š Pe categorii</h4>
            <div id="cat-breakdown" class="breakdown-list"></div>
        </div>

        <!-- GOALS VIEW -->
        <div id="view-goals" class="view">
            <header class="v-header">
                <button class="back-btn" data-back="home">â†</button>
                <h2>Obiective</h2>
                <button id="add-goal-btn" class="add-sm">+</button>
            </header>
            <div class="goals-stats">
                <div><strong id="g-active">0</strong><small>Active</small></div>
                <div><strong id="g-done">0</strong><small>Complete</small></div>
                <div><strong id="g-saved">0 RON</strong><small>Economisit</small></div>
            </div>
            <h4>ğŸ¯ Active</h4>
            <div id="active-goals" class="goals-list"></div>
            <h4>âœ… Complete</h4>
            <div id="done-goals" class="goals-list"></div>
        </div>

        <!-- REMINDERS VIEW -->
        <div id="view-reminders" class="view">
            <header class="v-header">
                <button class="back-btn" data-back="home">â†</button>
                <h2>Remindere</h2>
                <button id="add-remind-btn" class="add-sm">+</button>
            </header>
            <div id="all-reminds" class="remind-list"></div>
        </div>

        <!-- DEBTS VIEW -->
        <div id="view-debts" class="view">
            <header class="v-header">
                <button class="back-btn" data-back="home">â†</button>
                <h2>Datorii</h2>
                <button id="add-debt-btn" class="add-sm">+</button>
            </header>
            <div class="debt-sum">
                <div class="debt-card owe"><small>De plÄƒtit</small><strong id="total-owe">0 RON</strong></div>
                <div class="debt-card owed"><small>De primit</small><strong id="total-owed">0 RON</strong></div>
            </div>
            <h4>ğŸ’¸ Datorez</h4>
            <div id="debts-owe" class="debt-list"></div>
            <h4>ğŸ’° Mi se datoreazÄƒ</h4>
            <div id="debts-owed" class="debt-list"></div>
        </div>

        <!-- PROFILE VIEW -->
        <div id="view-profile" class="view">
            <header class="v-header">
                <button class="back-btn" data-back="home">â†</button>
                <h2>Profil</h2>
                <div></div>
            </header>
            <div class="profile-card">
                <div class="avatar" id="avatar">U</div>
                <h3 id="p-name">Utilizator</h3>
                <p id="p-email">email@ex.com</p>
            </div>
            <div class="p-stats">
                <div><strong id="p-trans">0</strong><small>TranzacÈ›ii</small></div>
                <div><strong id="p-member">-</strong><small>Membru din</small></div>
            </div>
            <div class="settings">
                <h4>âš™ï¸ SetÄƒri</h4>
                <div class="set-item">
                    <span>ğŸŒ™ TemÄƒ Ã®ntunecatÄƒ</span>
                    <label class="switch"><input type="checkbox" id="theme-tog" checked><span class="slider"></span></label>
                </div>
                <div class="set-item">
                    <span>ğŸ’± MonedÄƒ</span>
                    <select id="currency-sel"><option value="RON">RON</option><option value="EUR">EUR</option><option value="USD">USD</option></select>
                </div>
                <div class="set-item">
                    <span>ğŸ”” NotificÄƒri</span>
                    <label class="switch"><input type="checkbox" id="notif-tog" checked><span class="slider"></span></label>
                </div>
            </div>
            <div class="settings">
                <h4>ğŸ“Š Date</h4>
                <button class="set-btn" id="export-btn">ğŸ“¤ ExportÄƒ JSON</button>
                <button class="set-btn" id="export-csv">ğŸ“„ ExportÄƒ CSV</button>
                <button class="set-btn danger" id="clear-btn">ğŸ—‘ï¸ È˜terge date</button>
            </div>
            <button class="logout-btn" id="logout-btn">ğŸšª Deconectare</button>
        </div>

        <!-- BOTTOM NAV -->
        <nav class="bottom-nav">
            <button class="nav-btn active" data-view="home"><span>ğŸ </span>AcasÄƒ</button>
            <button class="nav-btn" data-view="transactions"><span>ğŸ“</span>TranzacÈ›ii</button>
            <button class="nav-btn add-main" id="add-main"><span class="plus">+</span></button>
            <button class="nav-btn" data-view="goals"><span>ğŸ¯</span>Obiective</button>
            <button class="nav-btn" data-view="profile"><span>ğŸ‘¤</span>Profil</button>
        </nav>
    </div>

    <!-- MODALS -->
    <div id="modal-trans" class="modal">
        <div class="modal-bg"></div>
        <div class="modal-box">
            <div class="modal-head"><h3 id="m-trans-title">TranzacÈ›ie nouÄƒ</h3><button class="m-close">âœ•</button></div>
            <form id="trans-form">
                <div class="type-tabs">
                    <button type="button" class="t-tab active" data-type="expense">CheltuialÄƒ</button>
                    <button type="button" class="t SEL-tab" data-type="income">Venit</button>
                    <button type="button" class="t-tab" data-type="correction">CorecÈ›ie</button>
                </div>
                <div class="amount-box">
                    <span id="cur-sym">RON</span>
                    <input type="number" id="t-amount" placeholder="0.00" step="0.01" required>
                </div>
                <div class="form-row">
                    <select id="t-cat" required></select>
                    <select id="t-subcat"></select>
                </div>
                <input type="text" id="t-desc" placeholder="Descriere (opÈ›ional)">
                <input type="date" id="t-date" required>
                <div class="check-row">
                    <input type="checkbox" id="t-recur"><label for="t-recur">Recurent</label>
                    <select id="t-recur-freq" class="hidden">
                        <option value="monthly">Lunar</option>
                        <option value="weekly">SÄƒptÄƒmÃ¢nal</option>
                    </select>
                </div>
                <input type="hidden" id="t-edit-id">
                <button type="submit" class="btn-primary">SalveazÄƒ</button>
            </form>
        </div>
    </div>

    <div id="modal-ai" class="modal">
        <div class="modal-bg"></div>
        <div class="modal-box ai-box">
            <div class="modal-head">
                <div class="ai-head"><span>ğŸ¤–</span><div><strong>Asistent AI</strong><small>Powered by Gemini</small></div></div>
                <button class="m-close">âœ•</button>
            </div>
            <div id="ai-msgs" class="ai-msgs">
                <div class="ai-msg bot">Salut! ğŸ‘‹ Sunt asistentul tÄƒu financiar. ÃntreabÄƒ-mÄƒ orice despre finanÈ›ele tale - analize, sfaturi, predicÈ›ii, pattern-uri, orice!</div>
            </div>
            <div class="ai-quick">
                <button data-q="AnalizeazÄƒ complet cheltuielile mele">ğŸ“Š AnalizÄƒ</button>
                <button data-q="Ce sfaturi ai pentru economisire?">ğŸ’¡ Sfaturi</button>
                <button data-q="Sunt abateri neobiÈ™nuite?">âš ï¸ Abateri</button>
                <button data-q="FÄƒ predicÈ›ie pentru luna asta">ğŸ”® PredicÈ›ie</button>
                <button data-q="CreeazÄƒ un plan de buget">ğŸ“‹ Plan</button>
                <button data-q="Care sunt trendurile mele?">ğŸ“ˆ Trenduri</button>
            </div>
            <div class="ai-input">
                <input type="text" id="ai-inp" placeholder="ÃntreabÄƒ orice...">
                <button id="ai-send">â¤</button>
            </div>
        </div>
    </div>

    <div id="modal-goal" class="modal">
        <div class="modal-bg"></div>
        <div class="modal-box">
            <div class="modal-head"><h3>Obiectiv nou</h3><button class="m-close">âœ•</button></div>
            <form id="goal-form">
                <input type="text" id="g-name" placeholder="Nume obiectiv" required>
                <input type="number" id="g-target" placeholder="SumÄƒ È›intÄƒ" required>
                <input type="number" id="g-saved" placeholder="Deja economisit" value="0">
                <input type="date" id="g-deadline" required>
                <div class="icons-row">
                    <button type="button" class="ic-btn active" data-ic="ğŸ¯">ğŸ¯</button>
                    <button type="button" class="ic-btn" data-ic="âœˆï¸">âœˆï¸</button>
                    <button type="button" class="ic-btn" data-ic="ğŸ ">ğŸ </button>
                    <button type="button" class="ic-btn" data-ic="ğŸš—">ğŸš—</button>
                    <button type="button" class="ic-btn" data-ic="ğŸ’»">ğŸ’»</button>
                    <button type="button" class="ic-btn" data-ic="ğŸ“±">ğŸ“±</button>
                    <button type="button" class="ic-btn" data-ic="ğŸ’">ğŸ’</button>
                    <button type="button" class="ic-btn" data-ic="ğŸ“">ğŸ“</button>
                </div>
                <button type="submit" class="btn-primary">CreeazÄƒ</button>
            </form>
        </div>
    </div>

    <div id="modal-remind" class="modal">
        <div class="modal-bg"></div>
        <div class="modal-box">
            <div class="modal-head"><h3>Reminder nou</h3><button class="m-close">âœ•</button></div>
            <form id="remind-form">
                <input type="text" id="r-title" placeholder="Titlu (ex: PlatÄƒ chirie)" required>
                <input type="number" id="r-amount" placeholder="SumÄƒ (opÈ›ional)">
                <input type="date" id="r-date" required>
                <select id="r-repeat">
                    <option value="once">O datÄƒ</option>
                    <option value="weekly">SÄƒptÄƒmÃ¢nal</option>
                    <option value="monthly">Lunar</option>
                </select>
                <button type="submit" class="btn-primary">SalveazÄƒ</button>
            </form>
        </div>
    </div>

    <div id="modal-debt" class="modal">
        <div class="modal-bg"></div>
        <div class="modal-box">
            <div class="modal-head"><h3>Datorie nouÄƒ</h3><button class="m-close">âœ•</button></div>
            <form id="debt-form">
                <div class="type-tabs">
                    <button type="button" class="t-tab active" data-dtype="owe">Datorez</button>
                    <button type="button" class="t-tab" data-dtype="owed">Mi se datoreazÄƒ</button>
                </div>
                <input type="text" id="d-person" placeholder="PersoanÄƒ" required>
                <input type="number" id="d-amount" placeholder="SumÄƒ" required>
                <input type="text" id="d-reason" placeholder="Motiv (opÈ›ional)">
                <input type="date" id="d-deadline" placeholder="Deadline (opÈ›ional)">
                <input type="hidden" id="d-type" value="owe">
                <button type="submit" class="btn-primary">AdaugÄƒ</button>
            </form>
        </div>
    </div>

    <div id="toast" class="toast"></div>

    <script src="app.js"></script>
</body>
</html>
